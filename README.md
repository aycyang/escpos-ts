# ESC/POS parser and generator Typescript library

_Not production-ready_

![Plot of ESC/POS commands implemented over time](progress.png)

Here's the current test output. If there's a check mark, that means a test
exists and the command is implemented. If the test is skipped, that means the
test is only a stub and the command probably hasn't been implemented yet.

ESC/POS has about 160 commands, so if the total number of tests you see below
isn't around that number, that means some stubs are still missing and someone
should create them. The output below can be generated by running `npm test`.

If you want to contribute, pick a command that doesn't have a passing test,
write the test, check that it fails, implement the command, then check that the
test passes. It should be fairly straightforward; just pull up Epson's online
documentation and look at how other similar commands are implemented.

```
▶ ParseError
  ✔ unrecognized prefix (0.491334ms)
  ✔ incomplete command (0.051916ms)
  ✔ incomplete command after complete command (0.089041ms)
✔ ParseError (0.880042ms)
✔ HorizontalTab (0.257666ms)
✔ SetCharacterSpacing (0.142958ms)
✔ SelectPrintMode (0.042042ms)
✔ SetAbsolutePrintPosition (0.038916ms)
✔ SelectOrCancelUserDefinedCharacterSet (0.192084ms)
﹣ DefineUserDefinedCharacters (0.1085ms) # SKIP
﹣ ControlBeeperTones (0.025875ms) # SKIP
﹣ ModelSpecificBuzzerControl (0.031708ms) # SKIP
✔ SelectBitImageMode (0.133125ms)
✔ SetUnderlineMode (0.068208ms)
✔ SelectDefaultLineSpacing (0.028542ms)
✔ SetLineSpacing (0.076709ms)
✔ SelectPeripheralDevice (0.028542ms)
✔ CancelUserDefinedCharacters (0.02425ms)
✔ InitializePrinter (0.077542ms)
✖ SetHorizontalTabPositions (0.043208ms)
✔ SetEmphasizedMode (0.029791ms)
﹣ SetDoubleStrikeMode (0.014917ms) # SKIP
﹣ PrintAndFeedPaper (0.013041ms) # SKIP
﹣ SelectPageMode (0.012583ms) # SKIP
✔ SelectCharacterFont (0.022417ms)
﹣ SelectInternationalCharacterSet (0.0145ms) # SKIP
﹣ SelectStandardMode (0.012584ms) # SKIP
﹣ SelectPrintDirectionInPageMode (0.012875ms) # SKIP
﹣ SetRotationMode (0.013667ms) # SKIP
﹣ SetPrintAreaInPageMode (0.012208ms) # SKIP
﹣ SetRelativePrintPosition (0.012792ms) # SKIP
✔ SelectJustification (0.020625ms)
﹣ SelectPaperSensorsToOutputPaperEndSignals (0.012792ms) # SKIP
﹣ SelectPaperSensorsToStopPrinting (0.0125ms) # SKIP
﹣ EnableOrDisablePanelButtons (0.012125ms) # SKIP
✔ PrintAndFeedNLines (0.01975ms)
﹣ PartialCutOnePointLeftUncut (0.012292ms) # SKIP
﹣ PartialCutThreePointsLeftUncut (0.01225ms) # SKIP
﹣ GeneratePulse (0.012208ms) # SKIP
﹣ SelectCharacterCodeTable (0.012167ms) # SKIP
﹣ TransmitPeripheralDeviceStatus (0.01275ms) # SKIP
﹣ TransmitPaperSensorStatus (0.012541ms) # SKIP
﹣ SetUpsideDownPrintMode (0.012166ms) # SKIP
✔ SelectKanjiCharacterFont (0.034833ms)
✔ CancelSetValuesForTopOrBottomLogoPrinting (0.029583ms)
✔ TransmitSetValuesForTopOrBottomLogoPrinting (0.023ms)
✔ SetTopLogoPrinting (0.032042ms)
✔ SetBottomLogoPrinting (0.024584ms)
✔ MakeExtendedSettingsForTopOrBottomLogoPrinting (0.027042ms)
✔ EnableOrDisableTopOrBottomLogoPrinting (0.054875ms)
✔ SelectCharacterSize (0.01925ms)
✔ SetWhiteAndBlackReversePrintMode (0.022625ms)
✔ SelectCutModeAndCutPaper (0.01775ms)
ℹ tests 53
ℹ suites 0
ℹ pass 30
ℹ fail 1
ℹ cancelled 0
ℹ skipped 22
ℹ todo 0
ℹ duration_ms 6.656583

✖ failing tests:

test at tests/all.ts:2:6674
✖ SetHorizontalTabPositions (0.043208ms)
  ParseError: unexpected token: 8
      at parse (/Users/a/workspace/escpos-ts/src/parse.ts:88:13)
      at TestContext.<anonymous> (/Users/a/workspace/escpos-ts/tests/all.ts:477:18)
      at Test.runInAsyncScope (node:async_hooks:214:14)
      at Test.run (node:internal/test_runner/test:1047:25)
      at Test.processPendingSubtests (node:internal/test_runner/test:744:18)
      at Test.postRun (node:internal/test_runner/test:1173:19)
      at Test.run (node:internal/test_runner/test:1101:12)
      at async Test.processPendingSubtests (node:internal/test_runner/test:744:7)

```
